(this["webpackJsonpnear-wiki"]=this["webpackJsonpnear-wiki"]||[]).push([[0],{156:function(e,t,a){e.exports=a.p+"static/media/my_location.8ccde75d.svg"},157:function(e,t,a){e.exports=a.p+"static/media/confirm.da01aa0e.svg"},158:function(e,t,a){e.exports=a.p+"static/media/location_search.a9bf295f.svg"},170:function(e,t,a){e.exports=a(323)},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},200:function(e,t,a){},321:function(e,t,a){},323:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),i=a.n(o),s=(a(175),a(20)),c=a(21),l=a(22),p=a(23),u=a(25),m=(a(176),function(e){return r.a.createElement("div",{className:"splashScreen"},r.a.createElement("header",{className:"splashScreen-header"},r.a.createElement("img",{src:e.svg,className:"splashScreen-svg",alt:e.message}),r.a.createElement("p",{className:"splashScreen-text"},e.message)))}),h=a(143),d=a(332),g=a(333),k=a(328),f=a(334),v=(a(177),function(e){return r.a.createElement(k.a,{position:e.position},r.a.createElement(f.a,null,e.content))}),b=function(e){var t=e.markers.map((function(e){return r.a.createElement(v,{key:e.key,position:e.position,content:e.content})}));return r.a.createElement(n.Fragment,null,t)},E=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getMarkerData",value:function(e){var t=[];return Object.keys(e).map((function(a){var n=e[a],r={key:n.pageid,content:n.title};return n.coordinates&&(r=Object(h.a)({},r,{position:[n.coordinates[0].lat,n.coordinates[0].lon]}),t.push(r)),null})),t}},{key:"render",value:function(){var e=[this.props.coords.latitude,this.props.coords.longitude],t=this.getMarkerData(this.props.landmarks);return r.a.createElement(d.a,{center:e,zoom:15,maxZoom:25,attributionControl:!1,zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!1,dragging:!0,animate:!0,easeLinearity:.35},r.a.createElement(g.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),r.a.createElement(k.a,{position:e},r.a.createElement(f.a,null,"You are here.")),t.length>0?r.a.createElement(b,{markers:t}):null)}}]),t}(r.a.Component),j=a(329),y=a(330),O=a(145),w=(a(199),a(200),function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getDistanceFromUserLocation",value:function(e){var t={lat:this.props.userLocation.latitude,lon:this.props.userLocation.longitude},a={lat:e[0].lat,lon:e[0].lon};return Object(O.getDistance)(t,a)+" metres away"}},{key:"getStrWithDelimiter",value:function(e,t){return e.split(" ").join(t)}},{key:"getWikiUrl",value:function(e){var t=this.getStrWithDelimiter(e.title,"_");return"https://www.wikipedia.org/wiki/".concat(t)}},{key:"getMapsUrl",value:function(e){var t=this.getStrWithDelimiter(e.title,"+");return"https://www.google.com/maps/search/".concat(t)}},{key:"render",value:function(){var e="https://react.semantic-ui.com/images/wireframe/image.png";this.props.landmark.original&&(e=this.props.landmark.original.source);var t="";this.props.landmark.coordinates&&(t=this.getDistanceFromUserLocation(this.props.landmark.coordinates));var a="";this.props.landmark.description&&(a=this.props.landmark.description.toTitleCase());var n=this.getWikiUrl(this.props.landmark),o=this.getMapsUrl(this.props.landmark);return r.a.createElement(j.a,{className:"landmark"},r.a.createElement(j.a.Image,{src:e,size:"small"}),r.a.createElement(j.a.Content,{verticalAlign:"bottom"},r.a.createElement(j.a.Header,null,this.props.landmark.title.toTitleCase()),r.a.createElement(j.a.Meta,null,r.a.createElement("span",{className:"location"},t)),r.a.createElement(j.a.Description,null,a),r.a.createElement(j.a.Extra,null,r.a.createElement(y.a,{icon:"external alternate",content:"Google Maps",labelPosition:"right",floated:"right",as:"a",href:o,target:"_blank"}),r.a.createElement(y.a,{icon:"wikipedia w",floated:"right",as:"a",href:n,target:"_blank"}))))}}]),t}(n.Component)),L=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return Object.keys(this.props.landmarks).map((function(t){return r.a.createElement(w,{key:e.props.landmarks[t].pageid,landmark:e.props.landmarks[t],userLocation:e.props.userLocation})}))}}]),t}(n.Component),C=(a(321),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={landmarks:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getLandmarksNearUserLocation()}},{key:"getLandmarksNearUserLocation",value:function(){var e="https://en.wikipedia.org/w/api.php",t={action:"query",generator:"geosearch",prop:"coordinates|pageimages|description|info",piprop:"original",ggscoord:this.props.coords.latitude+"|"+this.props.coords.longitude,ggsradius:2e3,ggslimit:20,format:"json"};e+="?origin=*",Object.keys(t).forEach((function(a){e+="&"+a+"="+t[a]}));var a=this;fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.query.pages;a.setState({landmarks:t})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(E,{landmarks:this.state.landmarks,coords:this.props.coords}),r.a.createElement(j.a.Group,{className:"landmarkList",divided:!0,unstackable:!0},r.a.createElement(L,{landmarks:this.state.landmarks,userLocation:this.props.coords})))}}]),t}(n.Component)),D=a(155),x=a(156),N=a.n(x),S=a(157),U=a.n(S),W=a(158),M=a.n(W),G=(a(322),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.isGeolocationAvailable?this.props.isGeolocationEnabled?this.props.coords?r.a.createElement(C,{coords:this.props.coords}):r.a.createElement(m,{svg:M.a,message:"Finding landmarks near you..."}):r.a.createElement(m,{svg:U.a,message:"Please enable location access."}):r.a.createElement(m,{svg:N.a,message:"Your browser does not support the Geolocation API."})}}]),t}(n.Component)),_=Object(D.geolocated)({positionOptions:{enableHighAccuracy:!0},watchPosition:!0,userDecisionTimeout:5e3})(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[170,1,2]]]);
//# sourceMappingURL=main.e44f82de.chunk.js.map